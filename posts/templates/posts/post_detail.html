{% include 'posts/post_base.html' %}
{% load bootstrap %}

{% block post_content %}
    <div class='col-md-3'></div>
    <div class='col-md-5'>
        <h2>{{ post.message }}</h2>
        <h3>{{ post.message_html }}</h3>
        
        <div>
            <a href="{% url 'posts:for_user' username=post.user.username %}">
                <strong>Posted by: {{ post.user.username }}</strong>
            </a>
            <div class='time'>
                <span> Posted on: {{ post.created_at }}</span>
            </div>
            <a href="{% url 'groups:single' slug=post.group.slug %}">
                <strong>Posted for Group: {{ post.group.name }}</strong>
            </a>
        </div>
        <hr>
        <strong class="float-right">Comments: {{ post.comments.count }}</strong> 
        <form action="{% url 'posts:addComment' username=user.username pk=post.pk %}" method="post">
            {{ form.as_p }}
            {% csrf_token %}
            <input type="submit" class='btn btn-primary' value="New Comment">
        </form>
        <hr>
        {% for comment in post.comments.all %}
        <p>{{ comment.message }}</p>
        <a class='author float-right' href="{% url 'posts:for_user' username=comment.user.username %}">
            @<strong>{{ post.user.username }}</strong>
        </a>
        <span class='date float-right'>On {{ comment.created_at }}</span>
        <br>
        <hr>
        {% empty %}
            <p>No comments yet!</p>
        {% endfor %}
    </div>
{% endblock %}  